version: "3.1"

stories:
  - story: Menu establecer plato 1
    steps:
      - intent: establecer_menu_plato
        entities:
          - menu_plato_categoria: category
      - slot_was_set:
          - menu_plato_categoria: category
      - action: utter_menu_plato_set
      - intent: affirm
      - action: MenuGet
      - slot_was_set:
          - menu_plato_categoria: category
      - action: utter_menu_plato_selecciona
      - action: menu_plato_id_form
      - active_loop: menu_plato_id_form
      - slot_was_set:
          - requested_slot: menu_plato_id
      - slot_was_set:
          - menu_plato_id: id
      - slot_was_set:
          - menu_plato_id: id
      - slot_was_set:
          - menu_hay_plato: true
      - slot_was_set:
          - menu_plato_1_id: id
      - slot_was_set:
          - menu_plato_1_nombre: name
      - slot_was_set:
          - menu_plato_1_precio: cost
      - slot_was_set:
          - requested_slot: null
      - active_loop: null
      - action: MenuResetPlatoID
      - slot_was_set:
          - menu_plato_id: null

  - story: Menu establecer plato 2
    steps:
      - intent: establecer_menu_plato
        entities:
          - menu_plato_categoria: category
      - action: utter_menu_plato_set
      - intent: affirm
      - action: MenuGet
      - slot_was_set:
          - menu_plato_categoria: category
      - action: utter_menu_plato_selecciona
      - action: menu_plato_id_form
      - active_loop: menu_plato_id_form
      - slot_was_set:
          - requested_slot: menu_plato_id
      - slot_was_set:
          - menu_plato_id: id
      - slot_was_set:
          - menu_plato_id: id
      - slot_was_set:
          - menu_hay_plato: true
      - slot_was_set:
          - menu_plato_2_id: id
      - slot_was_set:
          - menu_plato_2_nombre: name
      - slot_was_set:
          - menu_plato_2_precio: cost
      - slot_was_set:
          - requested_slot: null
      - active_loop: null
      - action: MenuResetPlatoID
      - slot_was_set:
          - menu_plato_id: null

  - story: Menu establecer plato 3
    steps:
      - intent: establecer_menu_plato
        entities:
          - menu_plato_categoria: category
      - slot_was_set:
          - menu_plato_categoria: category
      - action: utter_menu_plato_set
      - intent: affirm
      - action: MenuGet
      - slot_was_set:
          - menu_plato_categoria: category
      - action: utter_menu_plato_selecciona
      - action: menu_plato_id_form
      - active_loop: menu_plato_id_form
      - slot_was_set:
          - requested_slot: menu_plato_id
      - slot_was_set:
          - menu_plato_id: id
      - slot_was_set:
          - menu_plato_id: id
      - slot_was_set:
          - menu_hay_plato: true
      - slot_was_set:
          - menu_plato_3_id: id
      - slot_was_set:
          - menu_plato_3_nombre: name
      - slot_was_set:
          - menu_plato_3_precio: cost
      - slot_was_set:
          - requested_slot: null
      - active_loop: null
      - action: MenuResetPlatoID
      - slot_was_set:
          - menu_plato_id: null

  - story: Menu establecer bebida
    steps:
      - intent: establecer_menu_plato
        entities:
          - menu_plato_categoria: category
      - slot_was_set:
          - menu_plato_categoria: category
      - action: utter_menu_plato_set
      - intent: affirm
      - action: MenuGet
      - slot_was_set:
          - menu_plato_categoria: category
      - action: utter_menu_plato_selecciona
      - action: menu_plato_id_form
      - active_loop: menu_plato_id_form
      - slot_was_set:
          - requested_slot: menu_plato_id
      - slot_was_set:
          - menu_plato_id: id
      - slot_was_set:
          - menu_plato_id: id
      - slot_was_set:
          - menu_hay_plato: true
      - slot_was_set:
          - menu_bebida_id: id
      - slot_was_set:
          - menu_bebida_nombre: name
      - slot_was_set:
          - menu_bebida_precio: cost
      - slot_was_set:
          - requested_slot: null
      - active_loop: null
      - action: MenuResetPlatoID
      - slot_was_set:
          - menu_plato_id: null

  - story: Menu borrar plato generico happy path
    steps:
      - intent: menu_borra_plato
      - or:
          - slot_was_set:
              - menu_hay_plato: true
      - action: MenuGetUser
      - action: utter_menu_borrar_plato
      - intent: affirm
      - action: utter_menu_borrar_plato_selecciona
      - intent: menu_plato_id
        entities:
          - menu_plato_id: id
      - slot_was_set:
          - menu_plato_id: id
      - action: MenuBorrarPlato
      - slot_was_set:
          - menu_plato_id: null
      - slot_was_set:
          - menu_plato_categoria: null
      - slot_was_set:
          - menu_plato_1_id: null
      - slot_was_set:
          - menu_plato_1_nombre: null
      - slot_was_set:
          - menu_plato_1_precio: null
      - slot_was_set:
          - menu_hay_plato: false

  - story: Menu borrar todo
    steps:
      - intent: menu_borra_todo
      - or:
          - slot_was_set:
              - menu_hay_plato: true
      - action: utter_menu_borrar_todo
      - intent: affirm
      - action: MenuBorrarTodo
      - slot_was_set:
          - menu_plato_1_id: null
      - slot_was_set:
          - menu_plato_1_nombre: null
      - slot_was_set:
          - menu_plato_1_precio: null
      - slot_was_set:
          - menu_plato_2_id: null
      - slot_was_set:
          - menu_plato_2_nombre: null
      - slot_was_set:
          - menu_plato_2_precio: null
      - slot_was_set:
          - menu_plato_3_id: null
      - slot_was_set:
          - menu_plato_3_nombre: null
      - slot_was_set:
          - menu_plato_3_precio: null
      - slot_was_set:
          - menu_bebida_id: null
      - slot_was_set:
          - menu_bebida_nombre: null
      - slot_was_set:
          - menu_bebida_precio: null
      - slot_was_set:
          - menu_establecido: false
      - slot_was_set:
          - menu_plato_id: null
      - slot_was_set:
          - menu_plato_categoria: null
      - slot_was_set:
          - menu_hay_plato: false
