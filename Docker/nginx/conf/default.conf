#/etc/nginx/conf.d/default.conf
upstream lb {
  include servers;
}

# http access with reverse proxy
server {
  listen 80;

  # reverse proxy
  location / {
    proxy_pass http://lb;
  }
}

# https access with reverse proxy
server {
  listen 443 ssl;

  # set ssl certificates for https access
  ssl_certificate /etc/letsencrypt/live/tfgrasa.ddns.net/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/tfgrasa.ddns.net/privkey.pem;
  ssl_trusted_certificate /etc/letsencrypt/live/tfgrasa.ddns.net/fullchain.pem;

  # reverse proxy
  location / {
    proxy_pass  http://lb;
  }
}
